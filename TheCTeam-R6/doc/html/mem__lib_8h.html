<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>R5 Programmers Guide: include/mem_lib.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">R5 Programmers Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">mem_lib.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Memory management system using a single linked list of Memory Control Blocks (MCBs).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
</div>
<p><a href="mem__lib_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmcb.html">mcb</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory Control Block (MCB) structure.  <a href="structmcb.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a74a567210855aac72c49542d3bfff188" id="r_a74a567210855aac72c49542d3bfff188"><td class="memItemLeft" align="right" valign="top"><a id="a74a567210855aac72c49542d3bfff188" name="a74a567210855aac72c49542d3bfff188"></a>
typedef struct mcb&#160;</td><td class="memItemRight" valign="bottom"><b>mcb</b></td></tr>
<tr class="separator:a74a567210855aac72c49542d3bfff188"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ad5ca802affa5953ef16dc788f3e82532" id="r_ad5ca802affa5953ef16dc788f3e82532"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad5ca802affa5953ef16dc788f3e82532">mcb_status</a> { <a class="el" href="#ad5ca802affa5953ef16dc788f3e82532acc62d1576546f3245237e1b232d838b6">FREE</a>
, <a class="el" href="#ad5ca802affa5953ef16dc788f3e82532a6a8a5583659fbcdf64186aacaf55cece">ALLOCATED</a>
 }</td></tr>
<tr class="memdesc:ad5ca802affa5953ef16dc788f3e82532"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status of a memory block.  <a href="#ad5ca802affa5953ef16dc788f3e82532">More...</a><br /></td></tr>
<tr class="separator:ad5ca802affa5953ef16dc788f3e82532"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a458554f10123bdb975dee05b824786ae" id="r_a458554f10123bdb975dee05b824786ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a458554f10123bdb975dee05b824786ae">initialize_heap</a> (size_t)</td></tr>
<tr class="memdesc:a458554f10123bdb975dee05b824786ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the memory manager with a single large free block.  <br /></td></tr>
<tr class="separator:a458554f10123bdb975dee05b824786ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08672f1381d39b459aa779748bf40143" id="r_a08672f1381d39b459aa779748bf40143"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08672f1381d39b459aa779748bf40143">allocate_memory</a> (size_t size)</td></tr>
<tr class="memdesc:a08672f1381d39b459aa779748bf40143"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a block of memory of a specified size.  <br /></td></tr>
<tr class="separator:a08672f1381d39b459aa779748bf40143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8afd15f2f04d03f361ee98ae88d1a726" id="r_a8afd15f2f04d03f361ee98ae88d1a726"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8afd15f2f04d03f361ee98ae88d1a726">free_memory</a> (void *address)</td></tr>
<tr class="memdesc:a8afd15f2f04d03f361ee98ae88d1a726"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a previously allocated block of memory.  <br /></td></tr>
<tr class="separator:a8afd15f2f04d03f361ee98ae88d1a726"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2af4d6cb89d220ac220e0dfd1bb0dd61" id="r_a2af4d6cb89d220ac220e0dfd1bb0dd61"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmcb.html">mcb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2af4d6cb89d220ac220e0dfd1bb0dd61">heap_head</a></td></tr>
<tr class="memdesc:a2af4d6cb89d220ac220e0dfd1bb0dd61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Head of the MCB linked list.  <br /></td></tr>
<tr class="separator:a2af4d6cb89d220ac220e0dfd1bb0dd61"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Memory management system using a single linked list of Memory Control Blocks (MCBs). </p>
<p>This file contains function declarations and type definitions for a simple memory manager that uses Memory Control Blocks (MCBs) to track allocated and free memory within a single list structure.</p>
<p>The memory manager provides functions to initialize the heap, allocate memory, and free memory, with adjacent free blocks merged automatically to reduce fragmentation.</p>
<p>Functions:</p><ul>
<li><a class="el" href="#a458554f10123bdb975dee05b824786ae" title="Initializes the memory manager with a single large free block.">initialize_heap()</a>: Initializes a single large free block for memory management.</li>
<li><a class="el" href="#a08672f1381d39b459aa779748bf40143" title="Allocates a block of memory of a specified size.">allocate_memory()</a>: Allocates a block of memory, potentially splitting a free block.</li>
<li><a class="el" href="#a8afd15f2f04d03f361ee98ae88d1a726" title="Frees a previously allocated block of memory.">free_memory()</a>: Frees a previously allocated block, merging with adjacent free blocks if possible. </li>
</ul>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ad5ca802affa5953ef16dc788f3e82532" name="ad5ca802affa5953ef16dc788f3e82532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5ca802affa5953ef16dc788f3e82532">&#9670;&#160;</a></span>mcb_status</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ad5ca802affa5953ef16dc788f3e82532">mcb_status</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Status of a memory block. </p>
<p>This enum represents whether a memory block is free or allocated. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ad5ca802affa5953ef16dc788f3e82532acc62d1576546f3245237e1b232d838b6" name="ad5ca802affa5953ef16dc788f3e82532acc62d1576546f3245237e1b232d838b6"></a>FREE&#160;</td><td class="fielddoc"><p>Indicates the block is free and available for allocation. </p>
</td></tr>
<tr><td class="fieldname"><a id="ad5ca802affa5953ef16dc788f3e82532a6a8a5583659fbcdf64186aacaf55cece" name="ad5ca802affa5953ef16dc788f3e82532a6a8a5583659fbcdf64186aacaf55cece"></a>ALLOCATED&#160;</td><td class="fielddoc"><p>Indicates the block is currently allocated and in use. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a08672f1381d39b459aa779748bf40143" name="a08672f1381d39b459aa779748bf40143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08672f1381d39b459aa779748bf40143">&#9670;&#160;</a></span>allocate_memory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * allocate_memory </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a block of memory of a specified size. </p>
<p>This function searches the MCB list for a free block that can satisfy the requested size. If a suitable block is found, it marks it as allocated. If the block is larger than requested, it splits the block, creating a new free block with the remaining space.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The size of memory to allocate (in bytes). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void* Pointer to the start address of the allocated memory (NULL on failure). </dd></dl>

</div>
</div>
<a id="a8afd15f2f04d03f361ee98ae88d1a726" name="a8afd15f2f04d03f361ee98ae88d1a726"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8afd15f2f04d03f361ee98ae88d1a726">&#9670;&#160;</a></span>free_memory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int free_memory </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>address</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees a previously allocated block of memory. </p>
<p>This function marks a specified memory block as free, based on the given start address. If the freed block has adjacent free blocks, they are merged into a single larger free block to reduce fragmentation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>Pointer to the start address of the memory block to free. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int Returns 0 on successful freeing, or -1 if the block was not found. </dd></dl>

</div>
</div>
<a id="a458554f10123bdb975dee05b824786ae" name="a458554f10123bdb975dee05b824786ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a458554f10123bdb975dee05b824786ae">&#9670;&#160;</a></span>initialize_heap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_heap </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the memory manager with a single large free block. </p>
<p>This function creates an initial free block of hardcoded size (25,000 bytes) and sets up the MCB for this block. The block is added to the head of the memory manager's list.</p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2af4d6cb89d220ac220e0dfd1bb0dd61" name="a2af4d6cb89d220ac220e0dfd1bb0dd61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2af4d6cb89d220ac220e0dfd1bb0dd61">&#9670;&#160;</a></span>heap_head</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmcb.html">mcb</a>* heap_head</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Head of the MCB linked list. </p>
<p>This pointer represents the start of the memory block list used by the memory manager. Initially set to NULL. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
